{% extends '::base.html.twig' %}
	{% block content %}
	<script type="text/javascript">
    $(document).ready(function () {
        $('#register_country').change(function(){
            if($(this).val()){
                $.ajax({
                    type: "POST",
                    data: "country_id=" + $(this).val(),
                    url: "{{ path('getStates') }}",
                    success: function(data){
                        $('#register_state option:gt(0)').remove();
                        $('#register_state').append(data);
						document.getElementById('register_state').disabled=false;
                    }
                });
            } else {
                $('#register_state option:gt(0)').remove();
				document.getElementById('register_state').disabled=true;
				$('#register_city option:gt(0)').remove();
				document.getElementById('register_city').disabled=true;				
			}
        });
        $('#register_state').change(function(){
            if($(this).val()){
                $.ajax({
                    type: "POST",
                    data: "state_id=" + $(this).val(),
                    url: "{{ path('getCities') }}",
                    success: function(data){
                        $('#register_city option:gt(0)').remove();
                        $('#register_city').append(data);
						document.getElementById('register_city').disabled=false;
                    }
                });
            }
			else {
				$('#register_city option:gt(0)').remove();
				document.getElementById('register_city').disabled=true;					
			}
        });
		
		
		//Русский язык в форме регистрации. Отображение некоторых эдементов
		$('.registrationFieldPass > label').text('Пароль');
		$('#register_password > div:first > label').remove();
		$('#register_password > div:last > label').css({
			'position': 'relative',
			'top':'28px',
			'left': '-1px'
		}).text('Повторите пароль');
		$('.genderLabel > label').css({
			'margin-left':'4px'
		});
		$('.registrationFieldPass + div').css({
			'margin-top':'-10px'
		});
		$('#register_agreement').css({
			'position':'relative',
			'left':'-325px',
			'top':'-36px'
		});
		
		//Сравнение полей с паролем
		$('#register_password_Password').change(testPass).keyup(testPass);
		$('#register_password_Confirm').change(testPass).keyup(testPass);
		
		
		function testPass() {
			var p1 = $("#register_password_Password").val(); 
			var p2 = $("#register_password_Confirm").val();
			
			if(p1 == p2) { 
				$(".checkPassword").text("Пароли совпадают"); 
			} 
			else { 
				$(".checkPassword").text("Пароли не совпадают"); 
			}
		} 
		
	});
	</script>
		
	<form class="registerForm" action="{{ path('register') }}" method="post" {{ form_enctype(form) }}>
		<h2 class="registrationH2">Регистрация</h2>
		<h3 class="registrationH3">Все поля обязательны для заполнения</h3>
		<div style="clear:both;"></div>
			
			
		<div class="registrationField">
			{{ form_label(form.email) }}
			{{ form_errors(form.email) }}
			{{ form_widget(form.email) }}
			<span class="fieldHelp">Укажите реальный и действующий e-mail адрес. Он потребуется для входа на сайт и для получения уведомлений.</span>
		</div>
		<div class="registrationFieldPass">
			{{ form_label(form.password) }}
			{{ form_errors(form.password) }}
			{{ form_widget(form.password) }}
			<span class="fieldHelpPass">Придумайте сложный пароль, который нельзя подобрать; От 4 до 12 символов — цифры и латинские буквы.</span>
            <span class="checkPassword"></span>
		</div>
		<div class="registrationField">
			{{ form_label(form.username) }}
			{{ form_errors(form.username) }}
			{{ form_widget(form.username) }}
			<span class="fieldHelp">Укажите ваше имя или никнейм; От 2 до 12 символов - нельзя использовать цифры.</span>
		</div>
		<div class="registrationFieldGender">
			<div class="genderLabel">
			{{ form_label(form.gender) }}
			</div>
			{{ form_errors(form.gender) }}
			<div class="genderRadio">
			{{ form_widget(form.gender) }}
			</div>
		</div>
		<div class="registrationField">
			{{ form_label(form.birthDate) }}
			{{ form_errors(form.birthDate) }}
			<div class="birthDateSelect">
			{{ form_widget(form.birthDate) }}
			</div>
			<span class="birtDateDescription">День Месяц Год</span>
		</div>
		<div class="registrationFieldPlace">
			<span class="placeLabel">Место нахождения</span>
			<div class="placeSelects">
			{{ form_label(form.country) }}	
			{{ form_errors(form.country) }}
			{{ form_widget(form.country) }}
			{{ form_label(form.state) }}	
			{{ form_errors(form.state) }}
			{{ form_widget(form.state) }}
			{{ form_label(form.city) }}	
			{{ form_errors(form.city) }}
			{{ form_widget(form.city) }}
			</div>
		</div>
		<div class="registrationField">
			<span class="agreementLabel">Я согласен с <a href="#">пользовательским соглашением</a></span>
			{{ form_errors(form.agreement) }}
			{{ form_widget(form.agreement) }}
		</div>

        {{ form_rest(form) }}
	<input class="registerButton" type="submit" value="Зарегестрироваться">
	</form>
	{% endblock %}