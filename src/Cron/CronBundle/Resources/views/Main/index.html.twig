{% extends '::base.html.twig' %}
	{% block content %}
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#question_country').change(function(){
            if($(this).val()){
                $.ajax({
                    type: "POST",
                    data: "country_id=" + $(this).val(),
                    url: "{{ path('getStates') }}",
                    success: function(data){
                        $('#question_state option:gt(0)').remove();
                        $('#question_state').append(data);
						document.getElementById('question_state').disabled=false;
                    }
                });
            } else {
                $('#question_state option:gt(0)').remove();
				document.getElementById('question_state').disabled=true;
				$('#question_city option:gt(0)').remove();
				document.getElementById('question_city').disabled=true;				
			}
        });
        $('#question_state').change(function(){
            if($(this).val()){
                $.ajax({
                    type: "POST",
                    data: "state_id=" + $(this).val(),
                    url: "{{ path('getCities') }}",
                    success: function(data){
                        $('#question_city option:gt(0)').remove();
                        $('#question_city').append(data);
						document.getElementById('question_city').disabled=false;
                    }
                });
            }
			else {
				$('#question_city option:gt(0)').remove();
				document.getElementById('question_city').disabled=true;					
			}
        });
		$('[id="categoryScripture"]').after($('#question_category_1, [for="question_category_1"]'));
    });
	$(function() {
	var txt = $('#question_text'),
	hiddenDiv = $(document.createElement('div')),
	content = null;

	txt.addClass('noscroll');
	hiddenDiv.addClass('hiddenWriteQuestion');

	$('body').append(hiddenDiv);

	txt.bind('keyup', function() {

	    content = txt.val();
	    content = content.replace(/\n/g, '<br>');
	    hiddenDiv.html(content);

	    txt.css('height', hiddenDiv.height());

	});
});

</script>

<form class="writeQuestion" action="{{ path('index') }}" method="post" {{ form_enctype(form) }}>
	{{ form_errors(form) }}
	
	<div class="questionForm">
		{{ form_errors(form.text) }}
		{{ form_widget(form.text) }}
	</div>
	<div class="writeQuestionDiv">
		<div style="border-bottom: 2px solid #C88B79;overflow: hidden; padding-bottom: 3px">
				<input class="radioButton" name="Radio" value="Радио кнопка" type="radio"><span id="categoryScripture">По категориям<span>
			<div class="privateButton">
				{{ form_label(form.private) }}
				{{ form_errors(form.private) }}
				{{ form_widget(form.private) }}
			</div>
		</div>
		<div class="category">
			{{ form_errors(form.category) }}
			{{ form_widget(form.category) }}
		</div>	
		<div class="chosePlace">
			{{ form_label(form.country) }}	
			{{ form_errors(form.country) }}
			{{ form_widget(form.country) }}

			{{ form_label(form.state) }}
			{{ form_errors(form.state) }}
			{{ form_widget(form.state) }}

			{{ form_label(form.city) }}
			{{ form_errors(form.city) }}
			{{ form_widget(form.city) }}
		</div>
		<div style="clear: both;"></div>
		<div class="additionalInformation">
			{{ form_label(form.boundary) }}
			{{ form_errors(form.boundary) }}
			{{ form_widget(form.boundary) }}
		</div>
		<div style="clear: both"></div>
		<p class="questionCost">Стоимость 0 кредитов</p>
		<input class="submitButton" type="submit" />
	</div>	
	
	{{ form_rest(form) }}
</form>


	
{% endblock %}